<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="static/bs/css/bootstrap.min.css">
	
	<!-- Optional theme -->
	<link rel="stylesheet" href="static/bs/css/bootstrap-theme.min.css">
	<link rel="stylesheet" href="static/css/styles.css">
	<script>
		var requestId = "fewsfdfwer";		
	</script>
</head>
<body>
	<div>
		<div id="listSection" style="float:left;display: block;">
			<div id="flights-list"  class="list-group">
			</div>
		</div>
		<div id="chartSection" style="float:right;display: block;">
			
		</div>
	</div>
	<script data-main="static/scripts/app.un" src="/static/lib/require.js"></script>
	<script>
		requirejs.config({
		  //To get timely, correct error triggers in IE, force a define/shim exports
			//enforceDefine: true,		  
			config: {
				'moment': {
					noGlobal: true
				}
			},
		  paths: {
		    jquery: [
		      '/static/lib/jquery-1.11.3.min' 
		    ],
		    d3: [
		      '/static/lib/d3.min' 
		    ],
			moment: [
		      '/static/lib/moment' 
		    ],
			momenttimezone: [
		      '/static/lib/moment-timezone-with-data.min' 
		    ],
		    crossfilter: [
		      '/static/lib/crossfilter' 
		    ],
		    nunj: [
		      '/static/lib/nunjucks-slim.min' 
		    ],
		    templates: [
			  '/static/views/templates.min' 
		    ],
		    bootstrap: [
		      '/static/bs/js/bootstrap.min' 
		    ],
		    app: [
		      '/static/scripts/app.un'
		    ]
		  },
		  shim: {
		    d3: ['jquery'],
			moment: {deps:['jquery'], exports: "moment"},
			momenttimezone:['moment'],
			app:['d3','moment','momenttimezone','nunj', 'templates', 'bootstrap']
		  }
		});
		//  requirejs(["app"]);
		requirejs(['jquery', 'd3', 'moment', 'momenttimezone', 'crossfilter', 'nunj', 'app', 'bootstrap'], 
			function($, d3, moment, timezone, crossfilter, nunj, app, bootstrap) {				
			$( document ).ready(function() {
				//var env = nunj.configure('/static/views', { autoescape: true });
				console.log(moment().format('dddd, MMMM Do YYYY, h:mm:ss a'));
				//console.log('registering Datas '+requestId);
		      var flightController = new Flights.FlightController();
		      flightController.getFlights();
		  });
		});
	</script>
</body>
</html>
